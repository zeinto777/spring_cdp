CREATE DATABASE IF NOT EXISTS spring;

use spring;

DROP TABLE IF EXISTS tickets;
DROP TABLE IF EXISTS user_accounts;
DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS events;
DROP TABLE IF EXISTS categories;

CREATE TABLE users(
	id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(25) NOT NULL,
	email VARCHAR(25) NOT NULL
);

CREATE TABLE events(
    id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	title VARCHAR(25) NOT NULL,
	date DATE NOT NULL,
	ticket_price INTEGER NOT NULL
);

CREATE TABLE categories(
    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(25) NOT NULL
);

CREATE TABLE tickets(
	id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	place INTEGER NOT NULL,
	event_id BIGINT NOT NULL,
	user_id BIGINT NOT NULL,
	category_id INTEGER NOT NULL,
	FOREIGN KEY (event_id) REFERENCES events(id),
	FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (category_id) REFERENCES categories(id)
);

CREATE TABLE user_accounts(
	id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	money INTEGER NOT NULL,
	user_id BIGINT NOT NULL,
	FOREIGN KEY (user_id) REFERENCES users(id)
);

INSERT INTO users VALUES(223991, 'Andrii Pinchuk', 'Andrii_Pinchuk1@epam.com');
INSERT INTO users VALUES(324558, 'Andrii Pinchuk', 'Andrii_Pinchuk@epam.com');
INSERT INTO users VALUES(231471, 'Andrii Pinchuk', 'Andrii_Pinchuk@epam.com');

INSERT INTO events VALUES(344493,'Title_344493', '2015-11-17', 1000);
INSERT INTO events VALUES(930400,'Title_930400', '2015-11-17', 2000);
INSERT INTO events VALUES(306978,'Title_306978', '2015-11-17', 3000);

INSERT INTO user_accounts VALUES(15, 10000, 223991);
INSERT INTO user_accounts VALUES(16, 20000, 324558);
INSERT INTO user_accounts VALUES(17, 30000, 231471);

INSERT INTO categories VALUES(1, 'PREMIUM');
INSERT INTO categories VALUES(2, 'BAR');
INSERT INTO categories VALUES(3, 'STANDARD');

INSERT INTO tickets VALUES(593398, 1, 344493, 223991, 1);
INSERT INTO tickets VALUES(32506, 2, 930400, 324558, 2);
INSERT INTO tickets VALUES(609525, 3, 306978, 231471, 3);



